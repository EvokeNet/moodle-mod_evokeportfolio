<div id="submissions" class="submissions mt-2" data-courseid="{{{courseid}}}">
    {{^isdelayed}}
        {{#itsme}}
            <div class="actions">
                <a class="btn btn-primary" href="{{config.wwwroot}}/mod/evokeportfolio/submit.php?id={{cmid}}&sectionid={{sectionid}}">{{#str}}page_view_addsubmission, mod_evokeportfolio{{/str}}</a>
            </div>
        {{/itsme}}
    {{/isdelayed}}

    {{#submissions}}
        <div class="card card-body">
            <div class="post mainpost" data-id="{{id}}">
                <div class="userinfo">
                    <div class="userimg">
                        <img src="{{{usersubmissionpicture}}}" alt="{{{usersubmissionfullname}}}">
                    </div>
                    <div class="nameanddate">
                        <p class="username">{{{usersubmissionfullname}}}</p>
                        <span class="small">{{{humantimecreated}}}</span>
                    </div>
                </div>
                <div class="content">
                    {{#comment}}
                        <div class="comment">
                            {{{.}}}
                        </div>
                    {{/comment}}

                    {{#hasattachments}}
                        {{#attachments}}
                            <div class="attachment">
                                {{#isimage}}
                                    <img src="{{fileurl}}" class="img-responsive" alt="{{filename}}">
                                {{/isimage}}
                                {{^isimage}}
                                    <div class="fileinfo">
                                        <i class="fa fa-file-pdf-o"></i>&nbsp;{{#str}}page_submissions_portfolioattachment, mod_evokeportfolio{{/str}}
                                    </div>
                                    <div class="filedownload">
                                        <a href="{{fileurl}}" class="btn btn-secondary btn-sm">{{#str}}downloadfile, mod_evokeportfolio{{/str}}</a>
                                    </div>
                                {{/isimage}}
                            </div>
                        {{/attachments}}
                    {{/hasattachments}}
                </div>

                <hr>

                {{#comments}}
                    <div class="submissioncomment">
                        <div class="userimg">
                            <img src="{{{commentuserpicture}}}" alt="{{{commentuserfullname}}}">
                        </div>
                        <div class="entry">
                            <div class="entry-content">
                                <p class="name">{{{commentuserfullname}}}</p>
                                <p class="text">{{{text}}}</p>
                            </div>
                        </div>
                    </div>
                {{/comments}}

                <div class="add-comment">
                    <img src="{{{userpicture}}}" class="userimg" alt="{{{userfullname}}}">

                    <div class="input-group">
                        <p class="post-comment-input" placeholder="{{#str}}writeacomment, mod_evokeportfolio{{/str}}" contenteditable="true" data-tribute="true"></p>
                        <div class="input-group-append">
                            <button class="btn btn-outline-primary post-comment-btn" type="button">
                                <i class="fa fa-commenting-o"></i> {{#str}}comment, mod_evokeportfolio{{/str}}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {{/submissions}}
    {{^submissions}}
        <div class="alert alert-warning mt-2" role="alert">
            <h3>{{#str}}nosubmissions, mod_evokeportfolio{{/str}}</h3>
            <p class="mb-0">{{#str}}nosubmissions_desc, mod_evokeportfolio{{/str}}</p>
        </div>
    {{/submissions}}
</div>

{{#js}}
    require(['mod_evokeportfolio/addcomment', 'mod_evokeportfolio/tribute_init'], function(AddComment, TributeInit) {
        AddComment.init();

        TributeInit.init();
    });
{{/js}}