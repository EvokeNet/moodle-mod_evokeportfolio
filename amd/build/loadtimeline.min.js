define ("mod_evokeportfolio/loadtimeline",["jquery","core/ajax","core/templates","mod_evokeportfolio/tribute_init"],function(a,b,c,d){var e=function(b,c){this.courseid=b;this.evokation=c;this.tribute=d.init();var e=a("#myportfolio-tab");this.type=e.data("timeline_type");this.offset=e.data("timeline_offset");this.portfolioid=e.data("timeline_portfolioid");this.hasmoreitems=e.data("timeline_hasmoreitems");this.loadItems();document.addEventListener("scroll",function(a){var b=a.target.scrollingElement.scrollTop,c=a.target.scrollingElement.scrollHeight,d=a.target.scrollingElement.offsetHeight;if(this.hasmoreitems&&!this.wait&&b+d>c-40){this.loadItems()}}.bind(this));a(".nav-tabs .nav-link").click(function(a){this.type=a.target.dataset.timeline_type;this.offset=a.target.dataset.timeline_offset;this.portfolioid=a.target.dataset.timeline_portfolioid;this.hasmoreitems="true"===a.target.dataset.timeline_hasmoreitems;this.targetdiv=a.target.dataset.target;this.loadItems()}.bind(this))};e.prototype.courseid=0;e.prototype.type="my";e.prototype.offset=0;e.prototype.portfolioid=null;e.prototype.hasmoreitems=!0;e.prototype.targetdiv="#myportfolio";e.prototype.wait=!1;e.prototype.tribute=null;e.prototype.loadItems=function(){this.wait=!0;b.call([{methodname:"mod_evokeportfolio_loadtimeline",args:{courseid:this.courseid,type:this.type,offset:this.offset,portfolioid:this.portfolioid,hasmoreitems:this.hasmoreitems},done:this.handleLoadData.bind(this)}])};e.prototype.handleLoadData=function(b){var d=JSON.parse(b.data);c.render("mod_evokeportfolio/submission",d).then(function(b){var c=a(this.targetdiv);c.find(".submission_loading-placeholder").addClass("hidden");c.find(".submissions.timeline").append(b);this.tribute.reload()}.bind(this))};return{init:function init(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return new e(a,b)}}});
//# sourceMappingURL=loadtimeline.min.js.map
