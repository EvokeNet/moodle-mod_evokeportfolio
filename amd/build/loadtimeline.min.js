define ("mod_evokeportfolio/loadtimeline",["jquery","core/ajax","core/templates"],function(a,b,c){var d=function(b,c){this.courseid=b;this.evokation=c;this.loaditems();document.addEventListener("scroll",function(a){var b=a.target.scrollingElement.scrollTop,c=a.target.scrollingElement.scrollHeight,d=a.target.scrollingElement.offsetHeight;if(this.hasmoreitems&&!this.wait&&b+d>c-40){this.loaditems()}}.bind(this));a(".nav-tabs .nav-link").click(function(a){this.type=this.target=a.target.dataset.timeline_type;this.limit=this.target=a.target.dataset.timeline_limit;this.hasmoreitems="true"===a.target.dataset.timeline_hasmoreitems;this.targetdiv=a.target.dataset.target;this.loaditems()}.bind(this))};d.prototype.courseid=0;d.prototype.type="my";d.prototype.limit=0;d.prototype.hasmoreitems=!0;d.prototype.targetdiv="#myportfolio";d.prototype.wait=!1;d.prototype.loaditems=function(){this.wait=!0;b.call([{methodname:"mod_evokeportfolio_loadtimeline",args:{courseid:this.courseid,type:this.type,limit:this.limit,hasmoreitems:this.hasmoreitems},done:this.handleLoadData.bind(this)}])};d.prototype.handleLoadData=function(b){var d=JSON.parse(b.data);c.render("mod_evokeportfolio/submission",d).then(function(b){var c=a(this.targetdiv);c.find(".submission_loading-placeholder").addClass("hidden");c.find(".submissions.timeline").append(b)}.bind(this))};return{init:function init(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return new d(a,b)}}});
//# sourceMappingURL=loadtimeline.min.js.map
